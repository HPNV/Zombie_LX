!function r(a,s,h){function u(e,t){if(!s[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(c)return c(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[e]={exports:{}};a[e][0].call(o.exports,function(t){return u(a[e][1][t]||t)},o,o.exports,r,a,s,h)}return s[e].exports}for(var c="function"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("../module/character/GameObject"),s=t("../module/helper/Global"),h=(r=a.default,o(u,r),u.prototype.draw=function(t,e){t.drawImage(this.image,this.x,this.y,this.width,this.height),t.textAlign="center",t.textBaseline="middle",t.fillStyle="white",t.font="24px Arial",t.fillText(this.text,this.x+this.width/2,this.y+this.height/2)},u.prototype.update=function(){},u.prototype.clicked=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},u);function u(t,e,i){var n=r.call(this,{x:t,y:e,width:212,height:328})||this;return n.text=i,n.image=s.default.getInstance().assetManager.loadedImage.Card,n}i.default=h},{"../module/character/GameObject":13,"../module/helper/Global":17}],2:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,r=t("../module/character/GameObject"),a=(s=r.default,o(h,s),h.prototype.draw=function(t,e){t.fillStyle="grey",t.fillRect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fillRect(this.x,this.y,this.value,this.height),t.textAlign="center",t.textBaseline="middle",t.fillStyle="white",t.font="24px Arial",t.fillText(Math.floor(this.value)+"/"+this.width,this.x+this.width/2,this.y+this.height/2)},h.prototype.update=function(){},h);function h(t,e,i,n,o,r){var a=s.call(this,{x:t,y:e,width:o,height:r})||this;return a.color=n,a.value=i,a}i.default=a},{"../module/character/GameObject":13}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./module/engine/SceneEngine"),r=t("./module/helper/Global"),a=t("./view/scene1");window.onload=function(){!function(){var t=document.getElementsByTagName("canvas")[0],e=o.default.getInstance();e.initCanvas(t),e.makeWindowReactive();var i=r.default.getInstance().assetManager;i.addImagePath("bullet","Player/Bullet.png"),i.addImagePath("Zombie","Enemy/Zombie.png"),i.addImagePath("Player","Player/Player.png"),i.addImagePath("gameover","Helper/Game Over.png"),i.addAudioPath("PlayMusic","PlayMusic.mp3"),i.addImagePath("Card","Helper/Card.png"),i.addImagePath("Start","Helper/Start.png");for(var n=1;n<10;n++)i.addImagePath("tile"+n,"tiles/FieldsTile_0"+n+".png");i.addAssetDoneListener(function(){console.log("asset done"),e.updateScene(new a.default),e.start()}),i.loadAssets()}()}},{"./module/engine/SceneEngine":16,"./module/helper/Global":17,"./view/scene1":21}],4:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("../module/character/GameObject"),s=t("../module/helper/Global"),h=(r=a.default,o(u,r),u.prototype.play=function(){this.audio&&this.audio.play()},u.prototype.stop=function(){this.audio&&(this.audio.pause(),this.audio.currentTime=0)},u.prototype.draw=function(t,e){},u.prototype.update=function(){},u);function u(t){var e=r.call(this,{x:0,y:0,width:0,height:0})||this;return e.audio=""!==t?s.default.getInstance().assetManager.loadedAudio[t]:null,e}i.default=h},{"../module/character/GameObject":13,"../module/helper/Global":17}],5:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("../module/character/GameObject"),s=t("../module/engine/SceneEngine"),h=t("../module/helper/Global"),u=(r=a.default,o(c,r),c.prototype.draw=function(t,e){this.image?(t.save(),this.movingLeft?(t.translate(this.x+this.width,this.y),t.scale(-1,1),t.drawImage(this.image,0,0,this.width,this.height)):t.drawImage(this.image,this.x,this.y,this.width,this.height),t.restore()):(t.fillStyle="blue",t.fillRect(this.x,this.y,this.width,this.height)),this.drawHealthBar(t)},c.prototype.drawHealthBar=function(t){var e=this.width,i=this.x,n=this.y+this.height+2;t.fillStyle="red",t.fillRect(i,n,e,5);var o=this.health/this.maxHealth*e;t.fillStyle="green",t.fillRect(i,n,o,5)},c.prototype.update=function(){this.speed=.1*s.default.getInstance().deltaTimeMilli()},c.prototype.move=function(t,e){var i=Math.atan2(e-this.y,t-this.x),n=this.x+Math.cos(i)*this.speed,o=this.y+Math.sin(i)*this.speed;this.movingLeft=n<this.x,this.x=n,this.y=o},c);function c(t,e,i,n){var o=r.call(this,{x:t,y:e,width:64,height:70})||this;return o.maxHealth=20,o.health=o.maxHealth,o.speed=.1,o.damage=i,o.image=""!==n?h.default.getInstance().assetManager.loadedImage[n]:null,o.movingLeft=!1,o}i.default=u},{"../module/character/GameObject":13,"../module/engine/SceneEngine":16,"../module/helper/Global":17}],6:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("../module/character/GameObject"),s=(r=a.default,o(h,r),h.prototype.draw=function(t,e){t.fillStyle="blue",t.fillRect(this.x,this.y,this.width,this.height)},h.prototype.update=function(){},h);function h(t,e,i,n){var o=r.call(this,{x:t,y:e,width:20,height:20})||this;return o.value=i+Math.random()*(n-i),o}i.default=s},{"../module/character/GameObject":13}],7:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("../module/character/GameObject"),s=t("../module/helper/Global"),h=(r=a.default,o(u,r),u.prototype.draw=function(t,e){this.image?t.drawImage(this.image,this.x,this.y):(t.fillStyle="black",t.fillRect(this.x,this.y,this.width,this.height))},u.prototype.update=function(){},u.prototype.clicked=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},u);function u(t,e,i){var n=r.call(this,{x:t,y:e,width:t,height:e})||this;return n.image=""!==i?s.default.getInstance().assetManager.loadedImage[i]:null,n.width=n.image.width,n.height=n.image.height,n}i.default=h},{"../module/character/GameObject":13,"../module/helper/Global":17}],8:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("../module/character/GameObject"),s=t("../module/engine/SceneEngine"),h=t("./Player"),u=t("./tile"),c=(r=a.default,o(l,r),l.prototype.draw=function(e,i){this.tiles.forEach(function(t){t.draw(e,i)}),this.player.draw(e,i)},l.prototype.update=function(){this.player.setSpeed(s.default.getInstance().deltaTimeMilli()),this.player.update()},l.prototype.getRandomTile=function(){return"tile"+(Math.floor(9*Math.random())+1)},l.prototype.initMap=function(){for(var t=0;t<this.canvasHeight/32;t++)for(var e=0;e<this.canvasWidth/32;e++)this.tiles.push(new u.default(32*e,32*t,this.getRandomTile()))},l.prototype.getBottom=function(){return this.y+this.height},l.prototype.getRight=function(){return this.x+this.width},l.prototype.getLeft=function(){return this.x},l.prototype.getTop=function(){return this.y},l);function l(t){var e=r.call(this,{x:0,y:0,width:t.getWidthCanvas(),height:t.getHeightCanvas()})||this;return e.canvasWidth=t.getWidthCanvas(),e.canvasHeight=t.getHeightCanvas(),e.tiles=[],e.player=new h.default("ajax",t.getWidthCanvas()/2,t.getHeightCanvas()/2),e}i.default=c},{"../module/character/GameObject":13,"../module/engine/SceneEngine":16,"./Player":9,"./tile":12}],9:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("../module/character/GameObject"),s=t("../module/engine/SceneEngine"),h=t("../module/helper/Global"),u=t("./projectile"),c=(r=a.default,o(l,r),l.prototype.draw=function(t,e){this.image?(t.save(),this.movingLeft?(t.scale(-1,1),t.drawImage(this.image,-this.x-this.width,this.y,this.width,this.height)):t.drawImage(this.image,this.x,this.y,this.width,this.height),t.restore()):(t.fillStyle="red",t.fillRect(this.x,this.y,this.width,this.height))},l.prototype.update=function(){this.health<=0&&s.default.getInstance().currentScene.destroyGameObject(this),100<=this.exp&&(this.level+=1,this.exp=this.exp-100)},l.prototype.move=function(t){var e=t.has("w"),i=t.has("s"),n=t.has("a"),o=t.has("d");e&&o?(this.y-=this.speed,this.x+=this.speed):e&&n?(this.y-=this.speed,this.x-=this.speed):i&&o?(this.y+=this.speed,this.x+=this.speed):i&&n?(this.y+=this.speed,this.x-=this.speed):e?this.y-=this.speed:i?this.y+=this.speed:n?(this.x-=this.speed,this.movingLeft=!0):o&&(this.x+=this.speed,this.movingLeft=!1)},l.prototype.setSpeed=function(e){this.speed=this.baseSpeed*e,this.bullets.forEach(function(t){t.setSpeed(t.speed*e)})},l.prototype.attack=function(t,e){var i=Math.atan2(e-this.y,t-this.x),n=Math.cos(i),o=Math.sin(i);return this.x+=n,this.y+=o,new u.default(this.x,this.y,i,2,this.damage,"bullet")},l);function l(t,e,i){var n=r.call(this,{x:0,y:0,width:100,height:100})||this;return n.name=t,n.speed=0,n.baseSpeed=.2,n.x=e,n.y=i,n.level=1,n.exp=0,n.health=100,n.bullets=[],n.bulletCount=5,n.reloadTime=5e3,n.image=h.default.getInstance().assetManager.loadedImage.Player,n.movingLeft=!1,n.damage=10,n}i.default=c},{"../module/character/GameObject":13,"../module/engine/SceneEngine":16,"../module/helper/Global":17,"./projectile":11}],10:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var a,r=t("../module/character/GameObject"),s=(a=r.default,o(h,a),h.prototype.draw=function(t,e){t.fillStyle="grey",t.fillRect(this.x,this.y,this.width,this.height),t.textAlign="center",t.textBaseline="middle",t.fillStyle="white",t.font="24px Arial",t.fillText(this.text,this.x+this.width/2,this.y+this.height/2)},h.prototype.update=function(){},h);function h(t,e,i,n,o){var r=a.call(this,{x:t,y:e,width:n,height:o})||this;return r.text=i,r}i.default=s},{"../module/character/GameObject":13}],11:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,r=t("../module/character/GameObject"),h=t("../module/helper/Global"),a=(s=r.default,o(u,s),u.prototype.draw=function(t){var e;this.image?(e=this.getRotatedImage(this.image,this.angle),t.drawImage(e,this.x,this.y)):(t.fillStyle="black",t.fillRect(this.x,this.y,this.width,this.height))},u.prototype.update=function(){this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed},u.prototype.setSpeed=function(t){this.speed=t},u.prototype.getRotatedImage=function(t,e){var i=document.createElement("canvas");i.width=t.width,i.height=t.height;var n=i.getContext("2d");return n.translate(t.width/2,t.height/2),n.rotate(e),n.drawImage(t,-t.width/2,-t.height/2),i},u);function u(t,e,i,n,o,r){var a=s.call(this,{x:t,y:e,width:5,height:5})||this;return a.angle=i,a.speed=n,a.damage=o,a.image=""!==r?h.default.getInstance().assetManager.loadedImage[r]:null,a}i.default=a},{"../module/character/GameObject":13,"../module/helper/Global":17}],12:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("../module/character/GameObject"),s=t("../module/helper/Global"),h=(r=a.default,o(u,r),u.prototype.draw=function(t,e){t.drawImage(this.iamge,this.x,this.y)},u.prototype.update=function(){},u);function u(t,e,i){var n=r.call(this,{x:t,y:e,width:32,height:32})||this;return n.iamge=s.default.getInstance().assetManager.loadedImage[i],n}i.default=h},{"../module/character/GameObject":13,"../module/helper/Global":17}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Guid"),o=t("../engine/SceneEngine"),r=(Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isVisible",{get:function(){return this._isVisible},enumerable:!0,configurable:!0}),a.prototype.setVisible=function(t){this._isVisible=t},a.prototype.setZIndex=function(t){return this.zIndex=t,this},a.prototype.isIntersect=function(t){return this.x<=t.x+t.width&&this.x+this.width>=t.x&&this.y<=t.y+t.height&&this.y+this.height>=t.y},a.prototype.isIntersectSoft=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},a.prototype.isHorizontalLinearIntersect=function(t){return this.x<=t.x+t.width&&this.x+this.width>=t.x&&this.y<=t.y+t.height/2&&this.y+this.height>=t.y+t.height/2},a.prototype.isIn=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},a.prototype.fillHitBox=function(t,e){t.fillStyle=e;var i=this.getHitBox();t.fillRect(i.x,i.y,i.width,i.height)},a.prototype.destroy=function(){this._isDestroyed=!0,o.default.getInstance().injectDestroyedGameObject(this)},a.prototype.restore=function(){this._isDestroyed=!1},Object.defineProperty(a.prototype,"isDestroyed",{get:function(){return this._isDestroyed},enumerable:!0,configurable:!0}),a.prototype.setDestroyed=function(t){this._isDestroyed=t},a.prototype.getHitBox=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},a.prototype.isCollide=function(t){var e=this.getHitBox(),i=t.getHitBox();return e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y},a);function a(t){this.zIndex=0,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this._isDestroyed=!1,this._id=n.default.newGuid(),this._isVisible=!0}i.default=r},{"../engine/SceneEngine":16,"./Guid":14}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},o);function o(){}i.default=n},{}],15:[function(t,e,i){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var o=(Object.defineProperty(r.prototype,"ipaths",{get:function(){return this._ipaths},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"apaths",{get:function(){return this._apaths},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"assetDone",{get:function(){return this._assetDone},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"images",{get:function(){return this._images},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"audios",{get:function(){return this._audios},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"doneCount",{get:function(){return this._doneCount},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"loadedImage",{get:function(){return this._loadedImage},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"loadedAudio",{get:function(){return this._loadedAudio},enumerable:!0,configurable:!0}),r.prototype.addImagePath=function(t,e){this._ipaths.push({name:t,path:e})},r.prototype.addAudioPath=function(t,e){this._apaths.push({name:t,path:e})},r.prototype.addAssetDoneListener=function(t){this._assetDone=t},r.prototype.loadAssets=function(){this.loadAudios(),this.loadImages()},r.prototype.loadImages=function(){var o=this;n(this._ipaths).forEach(function(t){var e=t.name,i=t.path,n=new Image;n.src="./assets/images/"+i,n.onload=function(){o._loadedImage[e]=n,o._doneCount++,o.check()}})},r.prototype.loadAudios=function(){var o=this;n(this._apaths).forEach(function(t){var e=t.name,i=t.path,n=new Audio("./assets/audio/"+i);n.onloadeddata=function(){o._loadedAudio[e]=n,o._doneCount++,o.check()}})},r.prototype.check=function(){this._doneCount===this._ipaths.length+this._apaths.length&&this._assetDone()},r.prototype.loadImage=function(t){var e=new Image;return e.src="./assets/images/"+t,e},r.prototype.loadAudio=function(t){return new Audio("./assets/audio/"+t)},r);function r(){this._ipaths=[],this._apaths=[],this._assetDone=null,this._images=[],this._audios=[],this._doneCount=0,this._loadedImage={},this._loadedAudio={}}i.default=o},{}],16:[function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,a,s,h){return new(s=s||Promise)(function(i,e){function n(t){try{r(h.next(t))}catch(t){e(t)}}function o(t){try{r(h.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,o)}r((h=h.apply(t,a||[])).next())})},r=this&&this.__generator||function(i,n){var o,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(a=2&e[0]?r.return:e[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,e[1])).done)return a;switch(r=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,r=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=n.call(i,s)}catch(t){e=[6,t],r=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../helper/Global"),a=t("../page/CanvasController"),s=t("../helper/TimeCounter"),h=(u.prototype.getFPSRealization=function(){return this.fpsRealization},u.prototype.deltaTime=function(){return(this.getTime()-this.last_time)/1e3},u.prototype.deltaTimeMilli=function(){return this.getTime()-this.last_time},u.prototype.getTime=function(){return(new Date).getTime()},u.prototype.initCanvas=function(t){var e=this;this.readyStatus=!1,this.canvas=t,this.canvasController=new a.default(this.canvas),this.ctx=this.canvasController.getContext2d(),this.currentScene=null,this.canvasController.setMaximize(),o.default.getInstance().width=this.canvasController.getWidthCanvas(),o.default.getInstance().height=this.canvasController.getHeightCanvas(),this.renderCanvas=document.createElement("canvas"),this.renderCanvas.width=this.canvas.width,this.renderCanvas.height=this.canvas.height,this.ctxR=this.renderCanvas.getContext("2d"),t.addEventListener("click",function(t){return e.mouseClick(t)}),t.addEventListener("mousemove",function(t){return e.mouseMove(t)}),t.addEventListener("mousedown",function(t){return e.mouseDown(t)}),t.addEventListener("mouseup",function(t){return e.mouseUp(t)}),document.addEventListener("contextmenu",function(t){return e.mouseContextMenu(t)}),window.addEventListener("keydown",function(t){return e.keyDown(t)}),this.renderTimeCounter=new s.default(this.frameTime),this.clearTimeCounter=new s.default(2*this.frameTime)},u.prototype.mouseContextMenu=function(t){t.preventDefault(),null!=this.currentScene&&this.currentScene.mouseContextMenu(t)},u.prototype.keyDown=function(t){null!=this.currentScene&&this.currentScene.keyDown(t)},u.prototype.keyUp=function(t){null!=this.currentScene&&this.currentScene.keyUp(t)},u.prototype.mouseDown=function(t){null!=this.currentScene&&this.currentScene.mouseDown(t)},u.prototype.mouseUp=function(t){null!=this.currentScene&&this.currentScene.mouseUp(t)},u.prototype.mouseMove=function(t){null!=this.currentScene&&this.currentScene.mouseMove(t)},u.prototype.mouseClick=function(t){null!=this.currentScene&&this.currentScene.mouseClick(t)},u.prototype.getCanvasController=function(){return this.canvasController},u.getInstance=function(){return null==this.instance&&(this.instance=new u),this.instance},u.prototype.start=function(){var e=this;this.canvasController.setMaximize(),this.recurrentUpdate(),requestAnimationFrame(function(t){return e.render(t)})},u.prototype.render=function(t){var e=this;1==this.readyStatus&&(o.default.getInstance().fpsCap&&!this.willRender||(o.default.getInstance().clearCap&&!this.clearTimeCounter.updateTimeByCurrentTimeMili(t.valueOf())||(this.ctx.clearRect(0,0,o.default.getInstance().width,o.default.getInstance().height),this.ctxR.clearRect(0,0,o.default.getInstance().width,o.default.getInstance().height)),this.currentScene.processRender(this.ctxR,t),this.ctx.drawImage(this.renderCanvas,0,0,o.default.getInstance().width,o.default.getInstance().height),this.willRender=!1)),requestAnimationFrame(function(t){return e.render(t)})},u.prototype.recurrentUpdate=function(){return n(this,void 0,void 0,function(){var i,n,o;return r(this,function(t){switch(t.label){case 0:this.previousTime=(new Date).getTime(),t.label=1;case 1:return this.update(),i=(new Date).getTime(),n=i-this.previousTime,0<(o=this.frameTime-n)?[4,(e=n,new Promise(function(t){return setTimeout(t,e)}))]:[3,3];case 2:return t.sent(),this.fpsRealization=1e3/(n+o),[3,4];case 3:this.fpsRealization=1e3/n,t.label=4;case 4:return this.previousTime=i,this.willRender=!0,[3,1];case 5:return[2]}var e})})},u.prototype.update=function(){this.currentScene.processUpdate(),this.last_time=this.getTime()},u.prototype.makeWindowReactive=function(){this.canvasController.setReactiveListener(this.handleWindowListener),this.canvasController.makeWindowReactive()},u.prototype.handleWindowListener=function(t,e){o.default.getInstance().width=t,o.default.getInstance().height=e,window.location.reload()},u.prototype.updateScene=function(t){this.readyStatus=!1,this.currentScene=t,this.currentScene.onCreated(),this.readyStatus=!0},u.prototype.injectGameObject=function(t){null!=this.currentScene&&this.currentScene.addGameObject(t)},u.prototype.reorderZIndex=function(){null!=this.currentScene&&this.currentScene.reorderZIndex()},u.prototype.hideCursor=function(){this.canvas.style.cursor="none"},u.prototype.showCursor=function(){this.canvas.style.cursor="default"},u.prototype.injectDestroyedGameObject=function(t){this.currentScene.destroyGameObject(t)},u.instance=null,u);function u(){this.fpsRealization=0,this.previousTime=-1,this.fps=60,this.frameTime=1e3/this.fps,this.last_time=this.getTime(),this.willRender=!0}i.default=h},{"../helper/Global":17,"../helper/TimeCounter":18,"../page/CanvasController":19}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../engine/AssetManager"),o=(r.getInstance=function(){return null===this.instance&&(this.instance=new r),this.instance},r.instance=null,r);function r(){this.flipNum=0,this.width=0,this.height=0,this.debug=!1,this.assetManager=new n.default,this.name="",this.tile_size=50,this.fpsCap=!0,this.clearCap=!1,this.maxTileCount=5,this.flipNum=0}i.default=o},{"../engine/AssetManager":15}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.prototype.resetCounter=function(){this.counter=0},o.prototype.updateTimeByCurrentTimeMili=function(t){if(-1!=this.previousTime){var e=t-this.previousTime;if(this.counter+=e,this.counter>=this.targetTime)return this.counter%=this.targetTime,this.previousTime=t,!0}return this.previousTime=t,!1},o.prototype.updateTimeCounter=function(t){return this.counter+=t,this.counter>=this.targetTime&&(this.counter%=this.targetTime,!0)},o.prototype.setPreviousTime=function(t){this.previousTime=t},o.prototype.setTargetTime=function(t){this.targetTime=t},o);function o(t){this.targetTime=t,this.counter=0,this.previousTime=-1}i.default=n},{}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.prototype.setMaximize=function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight},o.prototype.resizeCanvas=function(){this.setMaximize(),null!=this.reactiveListener&&this.reactiveListener(this.getWidthCanvas(),this.getHeightCanvas())},o.prototype.makeWindowReactive=function(){var t=this;window.addEventListener("resize",function(){return t.resizeCanvas()},!1)},o.prototype.setReactiveListener=function(t){this.reactiveListener=t},o.prototype.getContext2d=function(){return this.canvas.getContext("2d")},o.prototype.getWidthCanvas=function(){return this.canvas.width},o.prototype.getHeightCanvas=function(){return this.canvas.height},o);function o(t){this.canvas=t,this.reactiveListener=null}i.default=n},{}],20:[function(t,e,i){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<i;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var n=t("../engine/SceneEngine"),o=(Object.defineProperty(a.prototype,"activities",{get:function(){return this._activities},enumerable:!0,configurable:!0}),a.prototype.addGameObject=function(t){this.gameObjects.push(t),this.reorderZIndex()},a.prototype.reorderZIndex=function(){this.gameObjects.sort(function(t,e){return t.zIndex-e.zIndex})},a.prototype.mouseContextMenu=function(t){},a.prototype.mouseClick=function(t){},a.prototype.mouseMove=function(t){},a.prototype.mouseDown=function(t){},a.prototype.mouseUp=function(t){},a.prototype.keyDown=function(t){},a.prototype.keyUp=function(t){},a.prototype.processRender=function(e,i){r(this.gameObjects).forEach(function(t){t.isVisible&&t.draw(e,i)}),this.onRender(e)},a.prototype.processUpdate=function(){r(this.gameObjects).forEach(function(t){t.update()}),this.updateActivity(n.default.getInstance().deltaTimeMilli()),this.onUpdate(),this.deleteTrash()},a.prototype.deleteTrash=function(){for(var t=r(this.toDeletes),e=0,i=t;e<i.length;e++){var n=i[e];this.noticeDelete(n)}for(;0<t.length;){var o=t.pop();0<=this.gameObjects.indexOf(o)?(this.noticeDelete(o),this.gameObjects.splice(this.gameObjects.indexOf(o),1)):console.log("Object Not Found!"),this.toDeletes.splice(this.toDeletes.indexOf(o),1)}},a.prototype.noticeDelete=function(t){},a.prototype.destroyGameObject=function(t){t.setDestroyed(!0),this.toDeletes.push(t)},a.prototype.updateActivity=function(t){for(var e=[],i=0,n=this._activities;i<n.length;i++){var o=n[i];o.updateActivity(t)&&e.push(o)}for(var r=0,a=e;r<a.length;r++){var s=a[r];this._activities.splice(this._activities.indexOf(s),1)}return 0===this._activities.length},a.prototype.addActivity=function(t){this._activities.push(t)},a);function a(){this.gameObjects=[],this.toDeletes=[],this.lapseTime=0,this.previousTime=-1,this.fps=60,this.frameTime=1e3/this.fps,this._activities=[]}i.default=o},{"../engine/SceneEngine":16}],21:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,a=t("../module/page/Scene"),s=t("../model/Map"),c=t("../module/engine/SceneEngine"),h=t("../model/Enemy"),u=t("../model/Experience"),l=t("../component/prrogressBar"),p=t("../model/Image"),d=t("../model/Audio"),f=t("../module/helper/Global"),y=t("../model/Text"),m=t("../component/SkillCard"),g=(r=a.default,o(v,r),v.prototype.onCreated=function(){var e=this;this.addGameObject(this.player),this.map.initMap(),this.map.tiles.forEach(function(t){e.addGameObject(t)}),this.addGameObject(this.player),this.addGameObject(this.expBar),this.addGameObject(this.liveBar),this.addGameObject(this.lvlText),this.addGameObject(this.gameMusic),this.addGameObject(this.startIamge),this.liveBar.height=25,this.expBar.height=25,this.liveBar.width=2*this.player.health,this.expBar.width=100,this.player.exp=99,this.gameOverImage=f.default.getInstance().assetManager.loadedImage.gameover},v.prototype.onRender=function(t){this.pause&&this.player.health<=0&&this.gameOverImage&&t.drawImage(this.gameOverImage,this.canvas.getWidthCanvas()/2-this.gameOverImage.width/2,this.canvas.getHeightCanvas()/2-this.gameOverImage.height/2)},v.prototype.onUpdate=function(){var i=this,n=this.player,e=this.keys,o=this,t=this.map,r=c.default.getInstance().deltaTimeMilli();if(this.curretTime=this.curretTime+r,this.liveBar.value=2*this.player.health,this.expBar.value=this.player.exp,this.lvlText.text=""+Math.floor(this.player.level),this.hasStarted||(this.pause=!0,this.mouseClick=function(t){console.log(t.pageX,t.pageY),console.log(i.startIamge.x,i.startIamge.y),i.startIamge.clicked(t.pageX,t.pageY)&&(i.hasStarted=!0,i.destroyGameObject(i.startIamge),i.gameMusic.play(),i.pause=!1)}),this.player.health<=0&&!this.pause&&(n.health=0,this.pause=!0),this.player.level>=this.lvlCounter&&!this.pause){var a=["speed","attack","health","exp","ammo","reload"];this.lvlCounter+=1;for(var s=0;s<3;s++){var h=Math.floor(Math.random()*a.length),u=new m.default(this.map.getRight()/5+300*s,this.map.getBottom()/5,a[h]);a.splice(h,1),this.skillCardList.push(u)}this.skillCardList.forEach(function(t){i.addGameObject(t)}),this.mouseClick=function(e){console.log(e.pageX,e.pageY),i.skillCardList.forEach(function(t){if(t.clicked(e.pageX,e.pageY)){switch(t.text){case"speed":i.player.baseSpeed+=.1;break;case"attack":i.player.damage+=3;break;case"health":i.player.health+=10,i.liveBar.width=i.liveBar.width+20;break;case"exp":i.player.exp+=10;break;case"ammo":i.player.bulletCount+=1;break;case"reload":i.player.reloadTime-=500}i.skillCardList.forEach(function(t){i.destroyGameObject(t)}),i.skillCardList=[],i.pause=!1}})},this.pause=!0}this.pause||(0==this.player.bulletCount?(this.disableShoot(),this.curretTime-this.checkReload>=this.player.reloadTime&&(this.player.bulletCount=5,this.checkReload=this.curretTime)):this.mouseClick=function(t){var e=n.attack(t.pageX,t.pageY);o.addGameObject(e),o.playerBullet.push(e),--n.bulletCount},1e4<=this.curretTime-this.checkDifficulty&&(this.spawnRate-=250,this.checkDifficulty=this.curretTime),this.curretTime-this.checkSpawn>=this.spawnRate&&(this.spawnEnemy(),this.checkSpawn=this.curretTime),n.setSpeed(r),onkeydown=function(t){e.add(t.key)},onkeyup=function(t){e.delete(t.key)},n.move(e),t.update(),n.update(),this.checkCollision(),this.moveEnemies())},v.prototype.checkCollision=function(){this.bulletCollide(),this.enemyCollide(),this.playerCollide()},v.prototype.bulletCollide=function(){var e=this;this.playerBullet.forEach(function(t){(t.x>e.canvas.getWidthCanvas()||t.x<0||t.y>e.canvas.getHeightCanvas()||t.y<0)&&(e.destroyGameObject(t),e.playerBullet.splice(e.playerBullet.indexOf(t),1))})},v.prototype.enemyCollide=function(){var i=this;this.enemies.forEach(function(e){i.playerBullet.forEach(function(t){e.isCollide(t)&&(e.health-=t.damage,i.destroyGameObject(t),i.playerBullet.splice(i.playerBullet.indexOf(t),1),e.health<=0&&(i.destroyGameObject(e),i.enemies.splice(i.enemies.indexOf(e),1),i.spawnExp(e.x,e.y,10,15)))})})},v.prototype.playerCollide=function(){var e=this;this.enemies.forEach(function(t){t.isCollide(e.player)&&(e.player.health-=t.damage,e.destroyGameObject(t),e.enemies.splice(e.enemies.indexOf(t),1))}),this.exp.forEach(function(t){t.isCollide(e.player)&&(e.player.exp=e.player.exp+t.value,e.destroyGameObject(t),e.exp.splice(e.exp.indexOf(t),1))})},v.prototype.spawnEnemy=function(){var t=this.player,e=new h.default(t.x+1e3*Math.random()-500,t.y+1e3*Math.random()-500,10,"Zombie");this.enemies.push(e),this.addGameObject(e)},v.prototype.spawnExp=function(t,e,i,n){var o=new u.default(t,e,i,n);this.addGameObject(o),this.exp.push(o)},v.prototype.moveEnemies=function(){var e=this;this.enemies.forEach(function(t){t.move(e.player.x,e.player.y),t.update()})},v.prototype.disableShoot=function(){this.mouseClick=function(){}},v);function v(){var t=null!==r&&r.apply(this,arguments)||this;return t.canvas=c.default.getInstance().getCanvasController(),t.keys=new Set,t.map=new s.default(t.canvas),t.player=t.map.player,t.enemies=[],t.playerBullet=[],t.exp=[],t.live=3,t.expBar=new l.default(32,t.map.getTop()+64,0,"blue",100,25),t.liveBar=new l.default(32,t.map.getTop()+32,0,"green",100,25),t.lvlText=new y.default(150,t.map.getTop()+64,""+Math.floor(t.player.level),25,25),t.startIamge=new p.default(t.map.getRight()/5-50,t.map.getBottom()/5-50,"Start"),t.lvlCounter=t.player.level+1,t.pause=!1,t.curretTime=0,t.checkSpawn=0,t.checkReload=0,t.checkDifficulty=0,t.gameOverImage=null,t.gameMusic=new d.default("PlayMusic"),t.skillCardList=[],t.musicPlayed=!1,t.hasStarted=!1,t.spawnRate=3e3,t}i.default=g},{"../component/SkillCard":1,"../component/prrogressBar":2,"../model/Audio":4,"../model/Enemy":5,"../model/Experience":6,"../model/Image":7,"../model/Map":8,"../model/Text":10,"../module/engine/SceneEngine":16,"../module/helper/Global":17,"../module/page/Scene":20}]},{},[3]);