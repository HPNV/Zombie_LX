!function r(s,a,u){function c(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(h)return h(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return c(s[t][1][e]||e)},o,o.exports,r,s,a,u)}return a[t].exports}for(var h="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./module/engine/SceneEngine"),r=e("./module/helper/Global"),s=e("./view/scene1");window.onload=function(){!function(){var e=document.getElementsByTagName("canvas")[0],t=o.default.getInstance();t.initCanvas(e),t.makeWindowReactive();for(var n=r.default.getInstance().assetManager,i=1;i<10;i++)n.addPath("tile"+i,"tiles/FieldsTile_0"+i+".png");n.addAssetDoneListener(function(){console.log("asset done"),t.updateScene(new s.default),t.start()}),n.loadAsset()}()}},{"./module/engine/SceneEngine":10,"./module/helper/Global":11,"./view/scene1":15}],2:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("../module/character/GameObject"),a=e("../module/engine/SceneEngine"),u=(r=s.default,o(c,r),c.prototype.draw=function(e,t){e.fillStyle="blue",e.fillRect(this.x,this.y,this.width,this.height)},c.prototype.update=function(){this.speed=.1*a.default.getInstance().deltaTimeMilli()},c.prototype.move=function(e,t){var n=Math.atan2(t-this.y,e-this.x);this.x+=Math.cos(n)*this.speed,this.y+=Math.sin(n)*this.speed},c);function c(e,t,n){var i=r.call(this,{x:e,y:t,width:32,height:50})||this;return i.health=20,i.speed=.1,i.damage=n,i}n.default=u},{"../module/character/GameObject":7,"../module/engine/SceneEngine":10}],3:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("../module/character/GameObject"),a=e("../module/engine/SceneEngine"),u=e("./Player"),c=e("./tile"),h=(r=s.default,o(l,r),l.prototype.draw=function(t,n){this.tiles.forEach(function(e){e.draw(t,n)}),this.player.draw(t,n)},l.prototype.update=function(){this.player.setSpeed(a.default.getInstance().deltaTimeMilli()),this.player.update()},l.prototype.getRandomTile=function(){return"tile"+(Math.floor(9*Math.random())+1)},l.prototype.initMap=function(){for(var e=0;e<this.canvasHeight/32;e++)for(var t=0;t<this.canvasWidth/32;t++)this.tiles.push(new c.default(32*t,32*e,this.getRandomTile()))},l);function l(e){var t=r.call(this,{x:0,y:0,width:e.getWidthCanvas(),height:e.getHeightCanvas()})||this;return t.canvasWidth=e.getWidthCanvas(),t.canvasHeight=e.getHeightCanvas(),t.tiles=[],t.player=new u.default("ajax",e.getWidthCanvas()/2,e.getHeightCanvas()/2),t}n.default=h},{"../module/character/GameObject":7,"../module/engine/SceneEngine":10,"./Player":4,"./tile":6}],4:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("../module/character/GameObject"),a=e("../module/engine/SceneEngine"),u=e("./projectile"),c=(r=s.default,o(h,r),h.prototype.draw=function(e,t){e.fillStyle="red",e.fillRect(this.x,this.y,this.width,this.height)},h.prototype.update=function(){this.health<=0&&a.default.getInstance().currentScene.destroyGameObject(this)},h.prototype.move=function(e){var t=e.has("w"),n=e.has("s"),i=e.has("a"),o=e.has("d");t&&o?(this.y-=this.speed,this.x+=this.speed):t&&i?(this.y-=this.speed,this.x-=this.speed):n&&o?(this.y+=this.speed,this.x+=this.speed):t?this.y-=this.speed:n?this.y+=this.speed:i?this.x-=this.speed:o&&(this.x+=this.speed)},h.prototype.setSpeed=function(t){this.speed=.2*t,this.bullets.forEach(function(e){e.setSpeed(e.speed*t)})},h.prototype.attack=function(e,t){var n=Math.atan2(t-this.y,e-this.x),i=Math.cos(n),o=Math.sin(n);return this.x+=i,this.y+=o,new u.default(this.x,this.y,n,2,10)},h);function h(e,t,n){var i=r.call(this,{x:0,y:0,width:32,height:75})||this;return i.name=e,i.speed=.2,i.x=t,i.y=n,i.health=100,i.bullets=[],i}n.default=c},{"../module/character/GameObject":7,"../module/engine/SceneEngine":10,"./projectile":5}],5:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s,r=e("../module/character/GameObject"),a=(s=r.default,o(u,s),u.prototype.draw=function(e,t){e.fillStyle="black",e.fillRect(this.x,this.y,this.width,this.height)},u.prototype.update=function(){this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed},u.prototype.setSpeed=function(e){this.speed=e},u);function u(e,t,n,i,o){var r=s.call(this,{x:e,y:t,width:5,height:5})||this;return r.angle=n,r.speed=i,r.damage=o,r}n.default=a},{"../module/character/GameObject":7}],6:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("../module/character/GameObject"),a=e("../module/helper/Global"),u=(r=s.default,o(c,r),c.prototype.draw=function(e,t){e.drawImage(this.iamge,this.x,this.y)},c.prototype.update=function(){},c);function c(e,t,n){var i=r.call(this,{x:e,y:t,width:32,height:32})||this;return i.iamge=a.default.getInstance().assetManager.loadedImage[n],i}n.default=u},{"../module/character/GameObject":7,"../module/helper/Global":11}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Guid"),o=e("../engine/SceneEngine"),r=(Object.defineProperty(s.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isVisible",{get:function(){return this._isVisible},enumerable:!0,configurable:!0}),s.prototype.setVisible=function(e){this._isVisible=e},s.prototype.setZIndex=function(e){return this.zIndex=e,this},s.prototype.isIntersect=function(e){return this.x<=e.x+e.width&&this.x+this.width>=e.x&&this.y<=e.y+e.height&&this.y+this.height>=e.y},s.prototype.isIntersectSoft=function(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y},s.prototype.isHorizontalLinearIntersect=function(e){return this.x<=e.x+e.width&&this.x+this.width>=e.x&&this.y<=e.y+e.height/2&&this.y+this.height>=e.y+e.height/2},s.prototype.isIn=function(e,t){return this.x<=e&&this.x+this.width>=e&&this.y<=t&&this.y+this.height>=t},s.prototype.fillHitBox=function(e,t){e.fillStyle=t;var n=this.getHitBox();e.fillRect(n.x,n.y,n.width,n.height)},s.prototype.destroy=function(){this._isDestroyed=!0,o.default.getInstance().injectDestroyedGameObject(this)},s.prototype.restore=function(){this._isDestroyed=!1},Object.defineProperty(s.prototype,"isDestroyed",{get:function(){return this._isDestroyed},enumerable:!0,configurable:!0}),s.prototype.setDestroyed=function(e){this._isDestroyed=e},s.prototype.getHitBox=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},s.prototype.isCollide=function(e){var t=this.getHitBox(),n=e.getHitBox();return t.x<n.x+n.width&&t.x+t.width>n.x&&t.y<n.y+n.height&&t.y+t.height>n.y},s);function s(e){this.zIndex=0,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this._isDestroyed=!1,this._id=i.default.newGuid(),this._isVisible=!0}n.default=r},{"../engine/SceneEngine":10,"./Guid":8}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},o);function o(){}n.default=i},{}],9:[function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(n,"__esModule",{value:!0});var o=(Object.defineProperty(r.prototype,"ipaths",{get:function(){return this._ipaths},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"assetDone",{get:function(){return this._assetDone},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"images",{get:function(){return this._images},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"doneCount",{get:function(){return this._doneCount},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"loadedImage",{get:function(){return this._loadedImage},enumerable:!0,configurable:!0}),r.prototype.addPath=function(e,t){this._ipaths.push({name:e,path:t})},r.prototype.addAssetDoneListener=function(e){this._assetDone=e},r.prototype.loadAsset=function(){var o=this;i(this._ipaths).forEach(function(e){var t=e.name,n=e.path,i=new Image;i.src="./assets/images/"+n,i.onload=function(){o._loadedImage[t]=i,o._doneCount++,o.check()}}),this.check()},r.prototype.check=function(){this._doneCount==this._ipaths.length&&this._assetDone()},r.prototype.loadImage=function(e){var t=new Image;return t.src="./assets/images/"+e,t},r);function r(){this._ipaths=[],this._assetDone=null,this._images=[],this._doneCount=0,this._loadedImage={}}n.default=o},{}],10:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(n,t){function i(e){try{r(u.next(e))}catch(e){t(e)}}function o(e){try{r(u.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,o)}r((u=u.apply(e,s||[])).next())})},r=this&&this.__generator||function(n,i){var o,r,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&t[0]?r.return:t[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,t[1])).done)return s;switch(r=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(n,a)}catch(e){t=[6,e],r=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../helper/Global"),s=e("../page/CanvasController"),a=e("../helper/TimeCounter"),u=(c.prototype.getFPSRealization=function(){return this.fpsRealization},c.prototype.deltaTime=function(){return(this.getTime()-this.last_time)/1e3},c.prototype.deltaTimeMilli=function(){return this.getTime()-this.last_time},c.prototype.getTime=function(){return(new Date).getTime()},c.prototype.initCanvas=function(e){var t=this;this.readyStatus=!1,this.canvas=e,this.canvasController=new s.default(this.canvas),this.ctx=this.canvasController.getContext2d(),this.currentScene=null,this.canvasController.setMaximize(),o.default.getInstance().width=this.canvasController.getWidthCanvas(),o.default.getInstance().height=this.canvasController.getHeightCanvas(),this.renderCanvas=document.createElement("canvas"),this.renderCanvas.width=this.canvas.width,this.renderCanvas.height=this.canvas.height,this.ctxR=this.renderCanvas.getContext("2d"),e.addEventListener("click",function(e){return t.mouseClick(e)}),e.addEventListener("mousemove",function(e){return t.mouseMove(e)}),e.addEventListener("mousedown",function(e){return t.mouseDown(e)}),e.addEventListener("mouseup",function(e){return t.mouseUp(e)}),document.addEventListener("contextmenu",function(e){return t.mouseContextMenu(e)}),window.addEventListener("keydown",function(e){return t.keyDown(e)}),this.renderTimeCounter=new a.default(this.frameTime),this.clearTimeCounter=new a.default(2*this.frameTime)},c.prototype.mouseContextMenu=function(e){e.preventDefault(),null!=this.currentScene&&this.currentScene.mouseContextMenu(e)},c.prototype.keyDown=function(e){null!=this.currentScene&&this.currentScene.keyDown(e)},c.prototype.keyUp=function(e){null!=this.currentScene&&this.currentScene.keyUp(e)},c.prototype.mouseDown=function(e){null!=this.currentScene&&this.currentScene.mouseDown(e)},c.prototype.mouseUp=function(e){null!=this.currentScene&&this.currentScene.mouseUp(e)},c.prototype.mouseMove=function(e){null!=this.currentScene&&this.currentScene.mouseMove(e)},c.prototype.mouseClick=function(e){null!=this.currentScene&&this.currentScene.mouseClick(e)},c.prototype.getCanvasController=function(){return this.canvasController},c.getInstance=function(){return null==this.instance&&(this.instance=new c),this.instance},c.prototype.start=function(){var t=this;this.canvasController.setMaximize(),this.recurrentUpdate(),requestAnimationFrame(function(e){return t.render(e)})},c.prototype.render=function(e){var t=this;1==this.readyStatus&&(o.default.getInstance().fpsCap&&!this.willRender||(o.default.getInstance().clearCap&&!this.clearTimeCounter.updateTimeByCurrentTimeMili(e.valueOf())||(this.ctx.clearRect(0,0,o.default.getInstance().width,o.default.getInstance().height),this.ctxR.clearRect(0,0,o.default.getInstance().width,o.default.getInstance().height)),this.currentScene.processRender(this.ctxR,e),this.ctx.drawImage(this.renderCanvas,0,0,o.default.getInstance().width,o.default.getInstance().height),this.willRender=!1)),requestAnimationFrame(function(e){return t.render(e)})},c.prototype.recurrentUpdate=function(){return i(this,void 0,void 0,function(){var n,i,o;return r(this,function(e){switch(e.label){case 0:this.previousTime=(new Date).getTime(),e.label=1;case 1:return this.update(),n=(new Date).getTime(),i=n-this.previousTime,0<(o=this.frameTime-i)?[4,(t=i,new Promise(function(e){return setTimeout(e,t)}))]:[3,3];case 2:return e.sent(),this.fpsRealization=1e3/(i+o),[3,4];case 3:this.fpsRealization=1e3/i,e.label=4;case 4:return this.previousTime=n,this.willRender=!0,[3,1];case 5:return[2]}var t})})},c.prototype.update=function(){this.currentScene.processUpdate(),this.last_time=this.getTime()},c.prototype.makeWindowReactive=function(){this.canvasController.setReactiveListener(this.handleWindowListener),this.canvasController.makeWindowReactive()},c.prototype.handleWindowListener=function(e,t){o.default.getInstance().width=e,o.default.getInstance().height=t,window.location.reload()},c.prototype.updateScene=function(e){this.readyStatus=!1,this.currentScene=e,this.currentScene.onCreated(),this.readyStatus=!0},c.prototype.injectGameObject=function(e){null!=this.currentScene&&this.currentScene.addGameObject(e)},c.prototype.reorderZIndex=function(){null!=this.currentScene&&this.currentScene.reorderZIndex()},c.prototype.hideCursor=function(){this.canvas.style.cursor="none"},c.prototype.showCursor=function(){this.canvas.style.cursor="default"},c.prototype.injectDestroyedGameObject=function(e){this.currentScene.destroyGameObject(e)},c.instance=null,c);function c(){this.fpsRealization=0,this.previousTime=-1,this.fps=60,this.frameTime=1e3/this.fps,this.last_time=this.getTime(),this.willRender=!0}n.default=u},{"../helper/Global":11,"../helper/TimeCounter":12,"../page/CanvasController":13}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("../engine/AssetManager"),o=(r.getInstance=function(){return null===this.instance&&(this.instance=new r),this.instance},r.instance=null,r);function r(){this.flipNum=0,this.width=0,this.height=0,this.debug=!1,this.assetManager=new i.default,this.name="",this.tile_size=50,this.fpsCap=!0,this.clearCap=!1,this.maxTileCount=5,this.flipNum=0}n.default=o},{"../engine/AssetManager":9}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.resetCounter=function(){this.counter=0},o.prototype.updateTimeByCurrentTimeMili=function(e){if(-1!=this.previousTime){var t=e-this.previousTime;if(this.counter+=t,this.counter>=this.targetTime)return this.counter%=this.targetTime,this.previousTime=e,!0}return this.previousTime=e,!1},o.prototype.updateTimeCounter=function(e){return this.counter+=e,this.counter>=this.targetTime&&(this.counter%=this.targetTime,!0)},o.prototype.setPreviousTime=function(e){this.previousTime=e},o.prototype.setTargetTime=function(e){this.targetTime=e},o);function o(e){this.targetTime=e,this.counter=0,this.previousTime=-1}n.default=i},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=(o.prototype.setMaximize=function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight},o.prototype.resizeCanvas=function(){this.setMaximize(),null!=this.reactiveListener&&this.reactiveListener(this.getWidthCanvas(),this.getHeightCanvas())},o.prototype.makeWindowReactive=function(){var e=this;window.addEventListener("resize",function(){return e.resizeCanvas()},!1)},o.prototype.setReactiveListener=function(e){this.reactiveListener=e},o.prototype.getContext2d=function(){return this.canvas.getContext("2d")},o.prototype.getWidthCanvas=function(){return this.canvas.width},o.prototype.getHeightCanvas=function(){return this.canvas.height},o);function o(e){this.canvas=e,this.reactiveListener=null}n.default=i},{}],14:[function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../engine/SceneEngine"),o=(Object.defineProperty(s.prototype,"activities",{get:function(){return this._activities},enumerable:!0,configurable:!0}),s.prototype.addGameObject=function(e){this.gameObjects.push(e),this.reorderZIndex()},s.prototype.reorderZIndex=function(){this.gameObjects.sort(function(e,t){return e.zIndex-t.zIndex})},s.prototype.mouseContextMenu=function(e){},s.prototype.mouseClick=function(e){},s.prototype.mouseMove=function(e){},s.prototype.mouseDown=function(e){},s.prototype.mouseUp=function(e){},s.prototype.keyDown=function(e){},s.prototype.keyUp=function(e){},s.prototype.processRender=function(t,n){r(this.gameObjects).forEach(function(e){e.isVisible&&e.draw(t,n)}),this.onRender(t)},s.prototype.processUpdate=function(){r(this.gameObjects).forEach(function(e){e.update()}),this.updateActivity(i.default.getInstance().deltaTimeMilli()),this.onUpdate(),this.deleteTrash()},s.prototype.deleteTrash=function(){for(var e=r(this.toDeletes),t=0,n=e;t<n.length;t++){var i=n[t];this.noticeDelete(i)}for(;0<e.length;){var o=e.pop();0<=this.gameObjects.indexOf(o)?(this.noticeDelete(o),this.gameObjects.splice(this.gameObjects.indexOf(o),1)):console.log("Object Not Found!"),this.toDeletes.splice(this.toDeletes.indexOf(o),1)}},s.prototype.noticeDelete=function(e){},s.prototype.destroyGameObject=function(e){e.setDestroyed(!0),this.toDeletes.push(e)},s.prototype.updateActivity=function(e){for(var t=[],n=0,i=this._activities;n<i.length;n++){var o=i[n];o.updateActivity(e)&&t.push(o)}for(var r=0,s=t;r<s.length;r++){var a=s[r];this._activities.splice(this._activities.indexOf(a),1)}return 0===this._activities.length},s.prototype.addActivity=function(e){this._activities.push(e)},s);function s(){this.gameObjects=[],this.toDeletes=[],this.lapseTime=0,this.previousTime=-1,this.fps=60,this.frameTime=1e3/this.fps,this._activities=[]}n.default=o},{"../engine/SceneEngine":10}],15:[function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("../module/page/Scene"),a=e("../model/Map"),u=e("../module/engine/SceneEngine"),c=e("../model/Enemy"),h=(r=s.default,o(l,r),l.prototype.onCreated=function(){var t=this;this.addGameObject(this.player),this.map.initMap(),this.map.tiles.forEach(function(e){t.addGameObject(e)}),this.addGameObject(this.player),setInterval(function(){t.spawnEnemy()},3e3)},l.prototype.onRender=function(e){},l.prototype.onUpdate=function(){var n=this.player,t=this.keys,i=this,e=this.map,o=u.default.getInstance().deltaTimeMilli();n.setSpeed(o),onkeydown=function(e){t.add(e.key)},onkeyup=function(e){t.delete(e.key)},n.move(t),this.mouseClick=function(e){var t=n.attack(e.pageX,e.pageY);i.addGameObject(t),i.playerBullet.push(t)},e.update(),this.checkCollision(),this.moveEnemies()},l.prototype.checkCollision=function(){var n=this;this.playerBullet.forEach(function(t){(t.x>n.canvas.getWidthCanvas()||t.x<0||t.y>n.canvas.getHeightCanvas()||t.y<0)&&(n.destroyGameObject(t),n.playerBullet.splice(n.playerBullet.indexOf(t),1)),n.enemies.forEach(function(e){t.isCollide(e)&&(e.health-=t.damage,n.destroyGameObject(t),n.playerBullet.splice(n.playerBullet.indexOf(t),1),e.health<=0&&(n.destroyGameObject(e),n.enemies.splice(n.enemies.indexOf(e),1))),e.isCollide(n.player)&&(n.player.health-=e.damage)})})},l.prototype.spawnEnemy=function(){var e=this.player,t=new c.default(e.x+1e3*Math.random()-500,e.y+1e3*Math.random()-500,10);this.enemies.push(t),this.addGameObject(t)},l.prototype.moveEnemies=function(){var t=this;this.enemies.forEach(function(e){e.move(t.player.x,t.player.y),e.update()})},l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.canvas=u.default.getInstance().getCanvasController(),e.keys=new Set,e.map=new a.default(e.canvas),e.player=e.map.player,e.enemies=[],e.playerBullet=[],e}n.default=h},{"../model/Enemy":2,"../model/Map":3,"../module/engine/SceneEngine":10,"../module/page/Scene":14}]},{},[1]);