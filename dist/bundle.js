!function s(a,r,h){function l(e,t){if(!r[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=r[e]={exports:{}};a[e][0].call(o.exports,function(t){return l(a[e][1][t]||t)},o,o.exports,s,a,r,h)}return r[e].exports}for(var u="function"==typeof require&&require,t=0;t<h.length;t++)l(h[t]);return l}({1:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,a=t("../module/character/GameObject"),r=t("../module/helper/Global"),h=(s=a.default,o(l,s),l.prototype.draw=function(t,e){t.drawImage(this.image,this.x,this.y,this.width,this.height),t.textAlign="center",t.textBaseline="middle",t.fillStyle="white",t.font="24px Arial",t.fillText(this.text,this.x+this.width/2,this.y+this.height/2)},l.prototype.update=function(){},l.prototype.clicked=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},l);function l(t,e,i){var n=s.call(this,{x:t,y:e,width:212,height:328})||this;return n.text=i,n.image=r.default.getInstance().assetManager.loadedImage.Card,n}i.default=h},{"../module/character/GameObject":13,"../module/helper/Global":17}],2:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,s=t("../module/character/GameObject"),a=(r=s.default,o(h,r),h.prototype.draw=function(t,e){t.fillStyle="grey",t.fillRect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fillRect(this.x,this.y,this.value,this.height),t.textAlign="center",t.textBaseline="middle",t.fillStyle="white",t.font="24px Arial",t.fillText(Math.floor(this.value)+"/"+this.width,this.x+this.width/2,this.y+this.height/2)},h.prototype.update=function(){},h);function h(t,e,i,n,o,s){var a=r.call(this,{x:t,y:e,width:o,height:s})||this;return a.color=n,a.value=i,a}i.default=a},{"../module/character/GameObject":13}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./module/engine/SceneEngine"),s=t("./module/helper/Global"),a=t("./view/scene1");window.onload=function(){!function(){var t=document.getElementsByTagName("canvas")[0],e=o.default.getInstance();e.initCanvas(t),e.makeWindowReactive();var i=s.default.getInstance().assetManager;i.addImagePath("bullet","Player/Bullet.png"),i.addImagePath("Zombie","Enemy/Zombie.png"),i.addImagePath("Player","Player/Player.png"),i.addImagePath("gameover","Helper/Game Over.png"),i.addAudioPath("PlayMusic","PlayMusic.mp3"),i.addImagePath("Card","Helper/Card.png"),i.addImagePath("Start","Helper/Start.png"),i.addImagePath("Boss","Enemy/Boss.png"),i.addImagePath("YouWin","Helper/YouWin.png"),i.addImagePath("Bbullet","Enemy/BossBullet.png");for(var n=1;n<10;n++)i.addImagePath("tile"+n,"tiles/FieldsTile_0"+n+".png");i.addAssetDoneListener(function(){console.log("asset done"),e.updateScene(new a.default),e.start()}),i.loadAssets()}()}},{"./module/engine/SceneEngine":16,"./module/helper/Global":17,"./view/scene1":21}],4:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,a=t("../module/character/GameObject"),r=t("../module/helper/Global"),h=(s=a.default,o(l,s),l.prototype.play=function(){this.audio&&this.audio.play()},l.prototype.stop=function(){this.audio&&(this.audio.pause(),this.audio.currentTime=0)},l.prototype.draw=function(t,e){},l.prototype.update=function(){},l);function l(t){var e=s.call(this,{x:0,y:0,width:0,height:0})||this;return e.audio=""!==t?r.default.getInstance().assetManager.loadedAudio[t]:null,e}i.default=h},{"../module/character/GameObject":13,"../module/helper/Global":17}],5:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var a,s=t("../module/character/GameObject"),r=t("../module/engine/SceneEngine"),h=t("../module/helper/Global"),l=t("./projectile"),u=(a=s.default,o(c,a),c.prototype.draw=function(t,e){this.image?(t.save(),this.movingLeft?(t.translate(this.x+this.width,this.y),t.scale(-1,1),t.drawImage(this.image,0,0,this.width,this.height)):t.drawImage(this.image,this.x,this.y,this.width,this.height),t.restore()):(t.fillStyle="blue",t.fillRect(this.x,this.y,this.width,this.height)),this.drawHealthBar(t)},c.prototype.drawHealthBar=function(t){var e=this.width,i=this.x,n=this.y+this.height+2;t.fillStyle="red",t.fillRect(i,n,e,5);var o=this.health/this.maxHealth*e;t.fillStyle="green",t.fillRect(i,n,o,5)},c.prototype.update=function(){this.speed=.1*r.default.getInstance().deltaTimeMilli()},c.prototype.move=function(t,e){var i=Math.atan2(e-this.y,t-this.x),n=this.x+Math.cos(i)*this.speed,o=this.y+Math.sin(i)*this.speed;this.movingLeft=n<this.x,this.x=n,this.y=o},c.prototype.attack=function(t,e){var i=Math.atan2(e-this.y,t-this.x),n=Math.cos(i),o=Math.sin(i);return this.x+=n,this.y+=o,new l.default(this.x,this.y,i,2,10,"Bbullet")},c);function c(t,e,i,n,o){var s=a.call(this,{x:t,y:e,width:64,height:70})||this;return s.maxHealth=n,s.health=s.maxHealth,s.speed=.1,s.damage=i,s.image=""!==o?h.default.getInstance().assetManager.loadedImage[o]:null,s.movingLeft=!1,s}i.default=u},{"../module/character/GameObject":13,"../module/engine/SceneEngine":16,"../module/helper/Global":17,"./projectile":11}],6:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,a=t("../module/character/GameObject"),r=(s=a.default,o(h,s),h.prototype.draw=function(t,e){t.fillStyle="blue",t.fillRect(this.x,this.y,this.width,this.height)},h.prototype.update=function(){},h);function h(t,e,i,n){var o=s.call(this,{x:t,y:e,width:20,height:20})||this;return o.value=i+Math.random()*(n-i),o}i.default=r},{"../module/character/GameObject":13}],7:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,a=t("../module/character/GameObject"),r=t("../module/helper/Global"),h=(s=a.default,o(l,s),l.prototype.draw=function(t,e){this.image?t.drawImage(this.image,this.x,this.y):(t.fillStyle="black",t.fillRect(this.x,this.y,this.width,this.height))},l.prototype.update=function(){},l.prototype.clicked=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},l);function l(t,e,i){var n=s.call(this,{x:t,y:e,width:t,height:e})||this;return n.image=""!==i?r.default.getInstance().assetManager.loadedImage[i]:null,n.width=n.image.width,n.height=n.image.height,n}i.default=h},{"../module/character/GameObject":13,"../module/helper/Global":17}],8:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,a=t("../module/character/GameObject"),r=t("../module/engine/SceneEngine"),h=t("./Player"),l=t("./tile"),u=(s=a.default,o(c,s),c.prototype.draw=function(e,i){this.tiles.forEach(function(t){t.draw(e,i)}),this.player.draw(e,i)},c.prototype.update=function(){this.player.setSpeed(r.default.getInstance().deltaTimeMilli()),this.player.update()},c.prototype.getRandomTile=function(){return"tile"+(Math.floor(9*Math.random())+1)},c.prototype.initMap=function(){for(var t=0;t<this.canvasHeight/32;t++)for(var e=0;e<this.canvasWidth/32;e++)this.tiles.push(new l.default(32*e,32*t,this.getRandomTile()))},c.prototype.getBottom=function(){return this.y+this.height},c.prototype.getRight=function(){return this.x+this.width},c.prototype.getLeft=function(){return this.x},c.prototype.getTop=function(){return this.y},c);function c(t){var e=s.call(this,{x:0,y:0,width:t.getWidthCanvas(),height:t.getHeightCanvas()})||this;return e.canvasWidth=t.getWidthCanvas(),e.canvasHeight=t.getHeightCanvas(),e.tiles=[],e.player=new h.default("ajax",t.getWidthCanvas()/2,t.getHeightCanvas()/2),e}i.default=u},{"../module/character/GameObject":13,"../module/engine/SceneEngine":16,"./Player":9,"./tile":12}],9:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,a=t("../module/character/GameObject"),r=t("../module/engine/SceneEngine"),h=t("../module/helper/Global"),l=t("./projectile"),u=(s=a.default,o(c,s),c.prototype.draw=function(t,e){this.image?(t.save(),this.movingLeft?(t.scale(-1,1),t.drawImage(this.image,-this.x-this.width,this.y,this.width,this.height)):t.drawImage(this.image,this.x,this.y,this.width,this.height),t.restore()):(t.fillStyle="red",t.fillRect(this.x,this.y,this.width,this.height))},c.prototype.update=function(){this.health<=0&&r.default.getInstance().currentScene.destroyGameObject(this),100<=this.exp&&(this.level+=1,this.exp=this.exp-100)},c.prototype.move=function(t){var e=t.has("w"),i=t.has("s"),n=t.has("a"),o=t.has("d");e&&o?(this.y-=this.speed,this.x+=this.speed):e&&n?(this.y-=this.speed,this.x-=this.speed):i&&o?(this.y+=this.speed,this.x+=this.speed):i&&n?(this.y+=this.speed,this.x-=this.speed):e?this.y-=this.speed:i?this.y+=this.speed:n?(this.x-=this.speed,this.movingLeft=!0):o&&(this.x+=this.speed,this.movingLeft=!1)},c.prototype.setSpeed=function(e){this.speed=this.baseSpeed*e,this.bullets.forEach(function(t){t.setSpeed(t.speed*e)})},c.prototype.attack=function(t,e){var i=Math.atan2(e-this.y,t-this.x),n=Math.cos(i),o=Math.sin(i);return this.x+=n,this.y+=o,new l.default(this.x,this.y,i,2,this.damage,"bullet")},c);function c(t,e,i){var n=s.call(this,{x:0,y:0,width:100,height:100})||this;return n.name=t,n.speed=0,n.baseSpeed=.2,n.x=e,n.y=i,n.level=1,n.exp=0,n.health=100,n.bullets=[],n.bulletCount=10,n.reloadTime=5e3,n.image=h.default.getInstance().assetManager.loadedImage.Player,n.movingLeft=!1,n.damage=10,n}i.default=u},{"../module/character/GameObject":13,"../module/engine/SceneEngine":16,"../module/helper/Global":17,"./projectile":11}],10:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var a,s=t("../module/character/GameObject"),r=(a=s.default,o(h,a),h.prototype.draw=function(t,e){t.fillStyle="grey",t.fillRect(this.x,this.y,this.width,this.height),t.textAlign="center",t.textBaseline="middle",t.fillStyle="white",t.font="24px Arial",t.fillText(this.text,this.x+this.width/2,this.y+this.height/2)},h.prototype.update=function(){},h);function h(t,e,i,n,o){var s=a.call(this,{x:t,y:e,width:n,height:o})||this;return s.text=i,s}i.default=r},{"../module/character/GameObject":13}],11:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var r,s=t("../module/character/GameObject"),h=t("../module/helper/Global"),a=(r=s.default,o(l,r),l.prototype.draw=function(t){var e;this.image?(e=this.getRotatedImage(this.image,this.angle),t.drawImage(e,this.x,this.y)):(t.fillStyle="black",t.fillRect(this.x,this.y,this.width,this.height))},l.prototype.update=function(){this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed},l.prototype.setSpeed=function(t){this.speed=t},l.prototype.getRotatedImage=function(t,e){var i=document.createElement("canvas");i.width=t.width,i.height=t.height;var n=i.getContext("2d");return n.translate(t.width/2,t.height/2),n.rotate(e),n.drawImage(t,-t.width/2,-t.height/2),i},l);function l(t,e,i,n,o,s){var a=r.call(this,{x:t,y:e,width:5,height:5})||this;return a.angle=i,a.speed=n,a.damage=o,a.image=""!==s?h.default.getInstance().assetManager.loadedImage[s]:null,a}i.default=a},{"../module/character/GameObject":13,"../module/helper/Global":17}],12:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,a=t("../module/character/GameObject"),r=t("../module/helper/Global"),h=(s=a.default,o(l,s),l.prototype.draw=function(t,e){t.drawImage(this.iamge,this.x,this.y)},l.prototype.update=function(){},l);function l(t,e,i){var n=s.call(this,{x:t,y:e,width:32,height:32})||this;return n.iamge=r.default.getInstance().assetManager.loadedImage[i],n}i.default=h},{"../module/character/GameObject":13,"../module/helper/Global":17}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Guid"),o=t("../engine/SceneEngine"),s=(Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isVisible",{get:function(){return this._isVisible},enumerable:!0,configurable:!0}),a.prototype.setVisible=function(t){this._isVisible=t},a.prototype.setZIndex=function(t){return this.zIndex=t,this},a.prototype.isIntersect=function(t){return this.x<=t.x+t.width&&this.x+this.width>=t.x&&this.y<=t.y+t.height&&this.y+this.height>=t.y},a.prototype.isIntersectSoft=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},a.prototype.isHorizontalLinearIntersect=function(t){return this.x<=t.x+t.width&&this.x+this.width>=t.x&&this.y<=t.y+t.height/2&&this.y+this.height>=t.y+t.height/2},a.prototype.isIn=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},a.prototype.fillHitBox=function(t,e){t.fillStyle=e;var i=this.getHitBox();t.fillRect(i.x,i.y,i.width,i.height)},a.prototype.destroy=function(){this._isDestroyed=!0,o.default.getInstance().injectDestroyedGameObject(this)},a.prototype.restore=function(){this._isDestroyed=!1},Object.defineProperty(a.prototype,"isDestroyed",{get:function(){return this._isDestroyed},enumerable:!0,configurable:!0}),a.prototype.setDestroyed=function(t){this._isDestroyed=t},a.prototype.getHitBox=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},a.prototype.isCollide=function(t){var e=this.getHitBox(),i=t.getHitBox();return e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y},a);function a(t){this.zIndex=0,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this._isDestroyed=!1,this._id=n.default.newGuid(),this._isVisible=!0}i.default=s},{"../engine/SceneEngine":16,"./Guid":14}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},o);function o(){}i.default=n},{}],15:[function(t,e,i){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<i;e++)for(var s=arguments[e],a=0,r=s.length;a<r;a++,o++)n[o]=s[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var o=(Object.defineProperty(s.prototype,"ipaths",{get:function(){return this._ipaths},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"apaths",{get:function(){return this._apaths},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"assetDone",{get:function(){return this._assetDone},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"images",{get:function(){return this._images},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"audios",{get:function(){return this._audios},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"doneCount",{get:function(){return this._doneCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"loadedImage",{get:function(){return this._loadedImage},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"loadedAudio",{get:function(){return this._loadedAudio},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"totalAssets",{get:function(){return this._ipaths.length+this._apaths.length},enumerable:!0,configurable:!0}),s.prototype.addImagePath=function(t,e){this._ipaths.push({name:t,path:e})},s.prototype.addAudioPath=function(t,e){this._apaths.push({name:t,path:e})},s.prototype.addAssetDoneListener=function(t){this._assetDone=t},s.prototype.loadAssets=function(){this.loadAudios(),this.loadImages()},s.prototype.loadImages=function(){var o=this;n(this._ipaths).forEach(function(t){var e=t.name,i=t.path,n=new Image;n.src="./assets/images/"+i,n.onload=function(){o._loadedImage[e]=n,o._doneCount++,o.check()}})},s.prototype.loadAudios=function(){var o=this;n(this._apaths).forEach(function(t){var e=t.name,i=t.path,n=new Audio("./assets/audio/"+i);n.onloadeddata=function(){o._loadedAudio[e]=n,o._doneCount++,o.check()}})},s.prototype.check=function(){this._doneCount===this._ipaths.length+this._apaths.length&&this._assetDone()},s.prototype.loadImage=function(t){var e=new Image;return e.src="./assets/images/"+t,e},s.prototype.loadAudio=function(t){return new Audio("./assets/audio/"+t)},s);function s(){this._ipaths=[],this._apaths=[],this._assetDone=null,this._images=[],this._audios=[],this._doneCount=0,this._loadedImage={},this._loadedAudio={}}i.default=o},{}],16:[function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,a,r,h){return new(r=r||Promise)(function(i,e){function n(t){try{s(h.next(t))}catch(t){e(t)}}function o(t){try{s(h.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(n,o)}s((h=h.apply(t,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,s,a,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,s=e[1],e=[0];continue;case 7:e=r.ops.pop(),r.trys.pop();continue;default:if(!(a=0<(a=r.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){r.label=e[1];break}if(6===e[0]&&r.label<a[1]){r.label=a[1],a=e;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(e);break}a[2]&&r.ops.pop(),r.trys.pop();continue}e=n.call(i,r)}catch(t){e=[6,t],s=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../helper/Global"),a=t("../page/CanvasController"),r=t("../helper/TimeCounter"),h=(l.prototype.getFPSRealization=function(){return this.fpsRealization},l.prototype.deltaTime=function(){return(this.getTime()-this.last_time)/1e3},l.prototype.deltaTimeMilli=function(){return this.getTime()-this.last_time},l.prototype.getTime=function(){return(new Date).getTime()},l.prototype.initCanvas=function(t){var e=this;this.readyStatus=!1,this.canvas=t,this.canvasController=new a.default(this.canvas),this.ctx=this.canvasController.getContext2d(),this.currentScene=null,this.canvasController.setMaximize(),o.default.getInstance().width=this.canvasController.getWidthCanvas(),o.default.getInstance().height=this.canvasController.getHeightCanvas(),this.renderCanvas=document.createElement("canvas"),this.renderCanvas.width=this.canvas.width,this.renderCanvas.height=this.canvas.height,this.ctxR=this.renderCanvas.getContext("2d"),t.addEventListener("click",function(t){return e.mouseClick(t)}),t.addEventListener("mousemove",function(t){return e.mouseMove(t)}),t.addEventListener("mousedown",function(t){return e.mouseDown(t)}),t.addEventListener("mouseup",function(t){return e.mouseUp(t)}),document.addEventListener("contextmenu",function(t){return e.mouseContextMenu(t)}),window.addEventListener("keydown",function(t){return e.keyDown(t)}),this.renderTimeCounter=new r.default(this.frameTime),this.clearTimeCounter=new r.default(2*this.frameTime)},l.prototype.mouseContextMenu=function(t){t.preventDefault(),null!=this.currentScene&&this.currentScene.mouseContextMenu(t)},l.prototype.keyDown=function(t){null!=this.currentScene&&this.currentScene.keyDown(t)},l.prototype.keyUp=function(t){null!=this.currentScene&&this.currentScene.keyUp(t)},l.prototype.mouseDown=function(t){null!=this.currentScene&&this.currentScene.mouseDown(t)},l.prototype.mouseUp=function(t){null!=this.currentScene&&this.currentScene.mouseUp(t)},l.prototype.mouseMove=function(t){null!=this.currentScene&&this.currentScene.mouseMove(t)},l.prototype.mouseClick=function(t){null!=this.currentScene&&this.currentScene.mouseClick(t)},l.prototype.getCanvasController=function(){return this.canvasController},l.getInstance=function(){return null==this.instance&&(this.instance=new l),this.instance},l.prototype.start=function(){var e=this;this.canvasController.setMaximize(),this.recurrentUpdate(),requestAnimationFrame(function(t){return e.render(t)})},l.prototype.render=function(t){var e=this;1==this.readyStatus&&(o.default.getInstance().fpsCap&&!this.willRender||(o.default.getInstance().clearCap&&!this.clearTimeCounter.updateTimeByCurrentTimeMili(t.valueOf())||(this.ctx.clearRect(0,0,o.default.getInstance().width,o.default.getInstance().height),this.ctxR.clearRect(0,0,o.default.getInstance().width,o.default.getInstance().height)),this.currentScene.processRender(this.ctxR,t),this.ctx.drawImage(this.renderCanvas,0,0,o.default.getInstance().width,o.default.getInstance().height),this.willRender=!1)),requestAnimationFrame(function(t){return e.render(t)})},l.prototype.recurrentUpdate=function(){return n(this,void 0,void 0,function(){var i,n,o;return s(this,function(t){switch(t.label){case 0:this.previousTime=(new Date).getTime(),t.label=1;case 1:return this.update(),i=(new Date).getTime(),n=i-this.previousTime,0<(o=this.frameTime-n)?[4,(e=n,new Promise(function(t){return setTimeout(t,e)}))]:[3,3];case 2:return t.sent(),this.fpsRealization=1e3/(n+o),[3,4];case 3:this.fpsRealization=1e3/n,t.label=4;case 4:return this.previousTime=i,this.willRender=!0,[3,1];case 5:return[2]}var e})})},l.prototype.update=function(){this.currentScene.processUpdate(),this.last_time=this.getTime()},l.prototype.makeWindowReactive=function(){this.canvasController.setReactiveListener(this.handleWindowListener),this.canvasController.makeWindowReactive()},l.prototype.handleWindowListener=function(t,e){o.default.getInstance().width=t,o.default.getInstance().height=e,window.location.reload()},l.prototype.updateScene=function(t){this.readyStatus=!1,this.currentScene=t,this.currentScene.onCreated(),this.readyStatus=!0},l.prototype.injectGameObject=function(t){null!=this.currentScene&&this.currentScene.addGameObject(t)},l.prototype.reorderZIndex=function(){null!=this.currentScene&&this.currentScene.reorderZIndex()},l.prototype.hideCursor=function(){this.canvas.style.cursor="none"},l.prototype.showCursor=function(){this.canvas.style.cursor="default"},l.prototype.injectDestroyedGameObject=function(t){this.currentScene.destroyGameObject(t)},l.instance=null,l);function l(){this.fpsRealization=0,this.previousTime=-1,this.fps=60,this.frameTime=1e3/this.fps,this.last_time=this.getTime(),this.willRender=!0}i.default=h},{"../helper/Global":17,"../helper/TimeCounter":18,"../page/CanvasController":19}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../engine/AssetManager"),o=(s.getInstance=function(){return null===this.instance&&(this.instance=new s),this.instance},s.instance=null,s);function s(){this.flipNum=0,this.width=0,this.height=0,this.debug=!1,this.assetManager=new n.default,this.name="",this.tile_size=50,this.fpsCap=!0,this.clearCap=!1,this.maxTileCount=5,this.flipNum=0}i.default=o},{"../engine/AssetManager":15}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.prototype.resetCounter=function(){this.counter=0},o.prototype.updateTimeByCurrentTimeMili=function(t){if(-1!=this.previousTime){var e=t-this.previousTime;if(this.counter+=e,this.counter>=this.targetTime)return this.counter%=this.targetTime,this.previousTime=t,!0}return this.previousTime=t,!1},o.prototype.updateTimeCounter=function(t){return this.counter+=t,this.counter>=this.targetTime&&(this.counter%=this.targetTime,!0)},o.prototype.setPreviousTime=function(t){this.previousTime=t},o.prototype.setTargetTime=function(t){this.targetTime=t},o);function o(t){this.targetTime=t,this.counter=0,this.previousTime=-1}i.default=n},{}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=(o.prototype.setMaximize=function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight},o.prototype.resizeCanvas=function(){this.setMaximize(),null!=this.reactiveListener&&this.reactiveListener(this.getWidthCanvas(),this.getHeightCanvas())},o.prototype.makeWindowReactive=function(){var t=this;window.addEventListener("resize",function(){return t.resizeCanvas()},!1)},o.prototype.setReactiveListener=function(t){this.reactiveListener=t},o.prototype.getContext2d=function(){return this.canvas.getContext("2d")},o.prototype.getWidthCanvas=function(){return this.canvas.width},o.prototype.getHeightCanvas=function(){return this.canvas.height},o);function o(t){this.canvas=t,this.reactiveListener=null}i.default=n},{}],20:[function(t,e,i){"use strict";var s=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<i;e++)for(var s=arguments[e],a=0,r=s.length;a<r;a++,o++)n[o]=s[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var n=t("../engine/SceneEngine"),o=(Object.defineProperty(a.prototype,"activities",{get:function(){return this._activities},enumerable:!0,configurable:!0}),a.prototype.addGameObject=function(t){this.gameObjects.push(t),this.reorderZIndex()},a.prototype.reorderZIndex=function(){this.gameObjects.sort(function(t,e){return t.zIndex-e.zIndex})},a.prototype.mouseContextMenu=function(t){},a.prototype.mouseClick=function(t){},a.prototype.mouseMove=function(t){},a.prototype.mouseDown=function(t){},a.prototype.mouseUp=function(t){},a.prototype.keyDown=function(t){},a.prototype.keyUp=function(t){},a.prototype.processRender=function(e,i){s(this.gameObjects).forEach(function(t){t.isVisible&&t.draw(e,i)}),this.onRender(e)},a.prototype.processUpdate=function(){s(this.gameObjects).forEach(function(t){t.update()}),this.updateActivity(n.default.getInstance().deltaTimeMilli()),this.onUpdate(),this.deleteTrash()},a.prototype.deleteTrash=function(){for(var t=s(this.toDeletes),e=0,i=t;e<i.length;e++){var n=i[e];this.noticeDelete(n)}for(;0<t.length;){var o=t.pop();0<=this.gameObjects.indexOf(o)?(this.noticeDelete(o),this.gameObjects.splice(this.gameObjects.indexOf(o),1)):console.log("Object Not Found!"),this.toDeletes.splice(this.toDeletes.indexOf(o),1)}},a.prototype.noticeDelete=function(t){},a.prototype.destroyGameObject=function(t){t.setDestroyed(!0),this.toDeletes.push(t)},a.prototype.updateActivity=function(t){for(var e=[],i=0,n=this._activities;i<n.length;i++){var o=n[i];o.updateActivity(t)&&e.push(o)}for(var s=0,a=e;s<a.length;s++){var r=a[s];this._activities.splice(this._activities.indexOf(r),1)}return 0===this._activities.length},a.prototype.addActivity=function(t){this._activities.push(t)},a);function a(){this.gameObjects=[],this.toDeletes=[],this.lapseTime=0,this.previousTime=-1,this.fps=60,this.frameTime=1e3/this.fps,this._activities=[]}i.default=o},{"../engine/SceneEngine":16}],21:[function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s,a=t("../module/page/Scene"),r=t("../model/Map"),p=t("../module/engine/SceneEngine"),h=t("../model/Enemy"),l=t("../model/Experience"),u=t("../component/prrogressBar"),c=t("../model/Image"),d=t("../model/Audio"),f=t("../module/helper/Global"),m=t("../model/Text"),y=t("../component/SkillCard"),g=(s=a.default,o(v,s),v.prototype.onCreated=function(){var e=this;this.addGameObject(this.player),this.map.initMap(),this.map.tiles.forEach(function(t){e.addGameObject(t)}),this.boss.width=this.boss.image.width-200,this.boss.height=this.boss.image.height-200,this.addGameObject(this.player),this.addGameObject(this.expBar),this.addGameObject(this.liveBar),this.addGameObject(this.lvlText),this.addGameObject(this.gameMusic),this.addGameObject(this.startIamge),this.addGameObject(this.timerText),this.liveBar.height=25,this.expBar.height=25,this.liveBar.width=2*this.player.health,this.expBar.width=100,this.gameOverImage=f.default.getInstance().assetManager.loadedImage.gameover,this.youWinImage=f.default.getInstance().assetManager.loadedImage.YouWin},v.prototype.onRender=function(t){this.pause&&this.player.health<=0&&this.gameOverImage&&t.drawImage(this.gameOverImage,this.canvas.getWidthCanvas()/2-this.gameOverImage.width/2,this.canvas.getHeightCanvas()/2-this.gameOverImage.height/2),this.pause&&this.win&&this.youWinImage&&t.drawImage(this.youWinImage,this.canvas.getWidthCanvas()/2-this.gameOverImage.width/2,this.canvas.getHeightCanvas()/2-this.gameOverImage.height/2)},v.prototype.onUpdate=function(){var i=this,n=this.player,e=this.keys,o=this,t=this.map,s=p.default.getInstance().deltaTimeMilli();this.curretTime=this.curretTime+s;var a,r=0;if(this.liveBar.value=2*this.player.health,this.expBar.value=this.player.exp,this.lvlText.text=""+Math.floor(this.player.level),this.hasStarted||(this.pause=!0,this.mouseClick=function(t){console.log(t.pageX,t.pageY),console.log(i.startIamge.x,i.startIamge.y),i.startIamge.clicked(t.pageX,t.pageY)&&(i.hasStarted=!0,i.destroyGameObject(i.startIamge),i.gameMusic.play(),i.pause=!1)}),this.player.health<=0&&!this.pause&&(n.health=0,this.pause=!0),this.player.level>=this.lvlCounter&&!this.pause){var h=["speed","attack","health","exp","ammo","reload"];this.lvlCounter+=1;for(var l=0;l<3;l++){var u=Math.floor(Math.random()*h.length),c=new y.default(this.map.getRight()/5+300*l,this.map.getBottom()/5,h[u]);h.splice(u,1),this.skillCardList.push(c)}this.skillCardList.forEach(function(t){i.addGameObject(t)}),this.mouseClick=function(e){console.log(e.pageX,e.pageY),i.skillCardList.forEach(function(t){if(t.clicked(e.pageX,e.pageY)){switch(t.text){case"speed":i.player.baseSpeed+=.1;break;case"attack":i.player.damage+=3;break;case"health":i.player.health+=10,i.liveBar.width=i.liveBar.width+20;break;case"exp":i.player.exp+=10;break;case"ammo":i.player.bulletCount+=1;break;case"reload":i.player.reloadTime-=500}i.skillCardList.forEach(function(t){i.destroyGameObject(t)}),i.skillCardList=[],i.pause=!1}})},this.pause=!0}if(!this.pause){if(0==this.player.bulletCount?(this.disableShoot(),this.curretTime-this.checkReload>=this.player.reloadTime&&(this.player.bulletCount=10,this.checkReload=this.curretTime)):0<this.player.bulletCount&&(this.mouseClick=function(t){var e=n.attack(t.pageX,t.pageY);o.addGameObject(e),o.playerBullet.push(e),--n.bulletCount}),n.setSpeed(s),onkeydown=function(t){e.add(t.key)},onkeyup=function(t){e.delete(t.key)},n.move(e),t.update(),n.update(),this.checkCollision(),this.bossCollide(),this.moveEnemies(),1==this.bossTime)return 0==r&&(this.addGameObject(this.boss),r=1),3e3<=this.curretTime-this.bossShoot&&(a=this.boss.attack(n.x,n.y),this.bossBullet.push(a),this.addGameObject(a),this.bossShoot=this.curretTime),this.boss.move(n.x,n.y),void this.boss.update();this.timerTime+=s,this.timerText.text=Math.floor(this.timer)+":"+Math.floor(this.second-this.timerTime/1e3),this.timer<=0&&this.second-this.timerTime/1e3<=0?this.bossTime=!0:(this.second-this.timerTime/1e3<=0&&(--this.timer,this.timerTime=0,this.second=60),1e3<=this.curretTime-this.checkDifficulty&&1e3<this.spawnRate&&(this.spawnRate-=250,this.checkDifficulty=this.curretTime),this.curretTime-this.checkSpawn>=this.spawnRate&&(this.spawnEnemy(),this.checkSpawn=this.curretTime))}},v.prototype.checkCollision=function(){this.bulletCollide(),this.enemyCollide(),this.playerCollide()},v.prototype.bossCollide=function(){var e=this;this.playerBullet.forEach(function(t){e.boss.isCollide(t)&&e.bossTime&&(e.boss.health-=t.damage,e.destroyGameObject(t),e.playerBullet.splice(e.playerBullet.indexOf(t),1),e.boss.health<=0&&(e.destroyGameObject(e.boss),e.enemies.splice(e.enemies.indexOf(e.boss),1),e.spawnExp(e.boss.x,e.boss.y,10,15),e.bossTime=!1,e.win=!0,e.pause=!0))}),this.bossBullet.forEach(function(t){(t.x>e.canvas.getWidthCanvas()||t.x<0||t.y>e.canvas.getHeightCanvas()||t.y<0)&&(e.destroyGameObject(t),e.bossBullet.splice(e.bossBullet.indexOf(t),1)),t.isCollide(e.player)&&e.bossTime&&(e.player.health-=t.damage,e.destroyGameObject(t),e.bossBullet.splice(e.bossBullet.indexOf(t),1))}),this.imuneTime+=p.default.getInstance().deltaTimeMilli(),this.boss.isCollide(this.player)&&1e3<=this.imuneTime&&0<this.boss.health&&this.bossTime&&(this.player.health-=this.boss.damage,this.imuneTime=0)},v.prototype.bulletCollide=function(){var e=this;this.playerBullet.forEach(function(t){(t.x>e.canvas.getWidthCanvas()||t.x<0||t.y>e.canvas.getHeightCanvas()||t.y<0)&&(e.destroyGameObject(t),e.playerBullet.splice(e.playerBullet.indexOf(t),1))})},v.prototype.enemyCollide=function(){var i=this;this.enemies.forEach(function(e){i.playerBullet.forEach(function(t){e.isCollide(t)&&(e.health-=t.damage,i.destroyGameObject(t),i.playerBullet.splice(i.playerBullet.indexOf(t),1),e.health<=0&&(i.destroyGameObject(e),i.enemies.splice(i.enemies.indexOf(e),1),i.spawnExp(e.x,e.y,10,15)))})})},v.prototype.playerCollide=function(){var e=this;this.enemies.forEach(function(t){t.isCollide(e.player)&&(e.player.health-=t.damage,e.destroyGameObject(t),e.enemies.splice(e.enemies.indexOf(t),1))}),this.exp.forEach(function(t){t.isCollide(e.player)&&(e.player.exp=e.player.exp+t.value,e.destroyGameObject(t),e.exp.splice(e.exp.indexOf(t),1))})},v.prototype.spawnEnemy=function(){for(var t,e,i=this.player;t=i.x+1e3*Math.random()-500,e=i.y+1e3*Math.random()-500,this.calculateDistance(i.x,i.y,t,e)<600;);var n=new h.default(t,e,10,20,"Zombie");this.enemies.push(n),this.addGameObject(n)},v.prototype.calculateDistance=function(t,e,i,n){var o=i-t,s=n-e;return Math.sqrt(o*o+s*s)},v.prototype.spawnExp=function(t,e,i,n){var o=new l.default(t,e,i,n);this.addGameObject(o),this.exp.push(o)},v.prototype.moveEnemies=function(){var e=this;this.enemies.forEach(function(t){t.move(e.player.x,e.player.y),t.update()})},v.prototype.disableShoot=function(){this.mouseClick=function(){}},v);function v(){var t=null!==s&&s.apply(this,arguments)||this;return t.canvas=p.default.getInstance().getCanvasController(),t.keys=new Set,t.map=new r.default(t.canvas),t.player=t.map.player,t.enemies=[],t.playerBullet=[],t.exp=[],t.live=3,t.boss=new h.default(t.map.getLeft(),t.map.getBottom()/2,30,400,"Boss"),t.expBar=new u.default(32,t.map.getTop()+64,0,"blue",100,25),t.liveBar=new u.default(32,t.map.getTop()+32,0,"green",100,25),t.lvlText=new m.default(150,t.map.getTop()+64,""+Math.floor(t.player.level),25,25),t.startIamge=new c.default(t.map.getRight()/5-50,t.map.getBottom()/5-50,"Start"),t.winIamge=new c.default(t.map.getRight()/5-50,t.map.getBottom()/5-50,"YouWin"),t.lvlCounter=t.player.level+1,t.pause=!1,t.curretTime=0,t.checkSpawn=0,t.checkReload=0,t.checkDifficulty=0,t.gameOverImage=null,t.youWinImage=null,t.gameMusic=new d.default("PlayMusic"),t.skillCardList=[],t.musicPlayed=!1,t.hasStarted=!1,t.bossTime=!1,t.spawnRate=3e3,t.timerText=new m.default(t.map.getRight()/2-50,t.map.getTop()+32,"3:00",100,25),t.timer=3,t.second=1,t.timerTime=0,t.imuneTime=1e3,t.bossShoot=0,t.win=!1,t.bossBullet=[],t}i.default=g},{"../component/SkillCard":1,"../component/prrogressBar":2,"../model/Audio":4,"../model/Enemy":5,"../model/Experience":6,"../model/Image":7,"../model/Map":8,"../model/Text":10,"../module/engine/SceneEngine":16,"../module/helper/Global":17,"../module/page/Scene":20}]},{},[3]);